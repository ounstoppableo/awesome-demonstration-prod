(()=>{var r={};r.id=807,r.ids=[807],r.modules={10846:r=>{"use strict";r.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:r=>{"use strict";r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:r=>{"use strict";r.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:r=>{"use strict";r.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:r=>{"use strict";r.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:r=>{"use strict";r.exports=require("crypto")},71711:(r,e,t)=>{"use strict";t.r(e),t.d(e,{patchFetch:()=>v,routeModule:()=>g,serverHooks:()=>y,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>w});var a={};t.r(a),t.d(a,{POST:()=>m,config:()=>f});var o=t(95010),s=t(14107),n=t(15258),i=t(62395);let u=require("node:fs/promises"),p=require("node:path");var d=t.n(p),l=t(94935),c=t(45490);let f={api:{bodyParser:!1}};async function m(r){return await (0,i.Ay)(r,async(r,e,t)=>{if(!await (0,c.A)())return t(i.bq.authError);let a=(await r.formData()).get("file");if(!a)return t(i.bq.paramsError);let o=Buffer.from(await a.arrayBuffer()),s=d().extname(a.name),n=(0,l.A)()+s,p=d().join(process.cwd(),"public","temp",n);await (0,u.writeFile)(p,o),e({msg:"File uploaded successfully",data:{filePath:d().join("public","temp",n),fileName:n}})})}let g=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/fileUpload/route",pathname:"/api/fileUpload",filename:"route",bundlePath:"app/api/fileUpload/route"},resolvedPagePath:"D:\\BaiduNetdiskDownload\\workspace\\awsome-demonstraion\\awesome-demonstration-prod\\src\\app\\api\\fileUpload\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:h,workUnitAsyncStorage:w,serverHooks:y}=g;function v(){return(0,n.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:w})}},59767:()=>{},12911:()=>{},45490:(r,e,t)=>{"use strict";t.d(e,{A:()=>o});var a=t(52112);async function o(){let r=(await (0,a.b3)()).get("Authorization");try{let e=await (await fetch(process.env.AUTH_ADDR,{headers:{token:r}})).json();if(200===e.code)return!0;return!1}catch(r){return console.log(r),!1}}},62395:(r,e,t)=>{"use strict";t.d(e,{Ay:()=>a,bq:()=>o});let a=async(r,e)=>{try{let t=await new Promise((t,a)=>{e(r,t,a)});return Response.json({code:200,msg:t.msg,data:t.data})}catch(r){return Response.json({code:n[s(r)],msg:r})}},o={serverError:"服务器错误!",paramsError:"参数不完整或格式错误！",fileError:"文件不存在!",authError:"token失效!"},s=r=>Object.keys(o).find(e=>o[e]===r);var n=function(r){return r[r.serverError=500]="serverError",r[r.paramsError=405]="paramsError",r[r.fileError=406]="fileError",r[r.authError=401]="authError",r}({})},94935:(r,e,t)=>{"use strict";t.d(e,{A:()=>u});var a=t(55511);let o={randomUUID:a.randomUUID},s=new Uint8Array(256),n=s.length,i=[];for(let r=0;r<256;++r)i.push((r+256).toString(16).slice(1));let u=function(r,e,t){if(o.randomUUID&&!e&&!r)return o.randomUUID();let u=(r=r||{}).random??r.rng?.()??(n>s.length-16&&((0,a.randomFillSync)(s),n=0),s.slice(n,n+=16));if(u.length<16)throw Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,e){if((t=t||0)<0||t+16>e.length)throw RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let r=0;r<16;++r)e[t+r]=u[r];return e}return function(r,e=0){return(i[r[e+0]]+i[r[e+1]]+i[r[e+2]]+i[r[e+3]]+"-"+i[r[e+4]]+i[r[e+5]]+"-"+i[r[e+6]]+i[r[e+7]]+"-"+i[r[e+8]]+i[r[e+9]]+"-"+i[r[e+10]]+i[r[e+11]]+i[r[e+12]]+i[r[e+13]]+i[r[e+14]]+i[r[e+15]]).toLowerCase()}(u)}}};var e=require("../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),a=e.X(0,[258,775],()=>t(71711));module.exports=a})();